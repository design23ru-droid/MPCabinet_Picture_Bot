# –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Wildberries Media Bot

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 0.4.0 ‚Üí 0.5.0 (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 22.01.2026 14:30

---

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

‚úÖ **–ü—Ä–æ–µ–∫—Ç –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Å Wildberries CDN
- ‚úÖ HLS ‚Üí MP4 –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ ffmpeg
- ‚úÖ –§–æ–Ω–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤–∏–¥–µ–æ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ URLs (TTL 1 —á–∞—Å)
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Local Bot API (–ª–∏–º–∏—Ç 2GB)**
- ‚úÖ **–î–µ–ø–ª–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Docker + PostgreSQL)**
- ‚úÖ 91 —Ç–µ—Å—Ç, –ø–æ–∫—Ä—ã—Ç–∏–µ 82%

---

## –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–ª–∏–∑–æ–≤

### –í–µ—Ä—Å–∏—è 0.4.0 (—Ç–µ–∫—É—â–∞—è) ‚Äî 22.01.2026

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Local Telegram Bot API Server (–ª–∏–º–∏—Ç 2GB –≤–º–µ—Å—Ç–æ 50MB)
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `TelegramAPIServer.from_base()` –≤ aiogram 3.x
- [x] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å/–±–µ–∑ Local API)
- [x] Docker Compose –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –¥–µ–ø–ª–æ—è
- [x] PostgreSQL 16 —Å multi-tenant —Å—Ö–µ–º–∞–º–∏ (shared + mpcabinet)
- [x] Dockerfile —Å ffmpeg –¥–ª—è HLS –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `config/settings.py` (TELEGRAM_API_BASE_URL, TELEGRAM_API_LOCAL, DATABASE_URL)
- –û–±–Ω–æ–≤–ª—ë–Ω `main.py` (—É—Å–ª–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Local API session)
- –°–æ–∑–¥–∞–Ω `Dockerfile` –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω `docs/VDS.md` (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Timeweb Cloud)
- –†–∞–∑–≤—ë—Ä–Ω—É—Ç–æ –Ω–∞ VPS: 89.23.101.91 (Timeweb Cloud MSK, 2 GB RAM)

**Commits:**
- `5e79dc9 - –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ (0-90%)`
- `b28725d - –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–∂–∞—Ç–∏–µ –≤–∏–¥–µ–æ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ HLS ‚Üí MP4`
- `63f21fb - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å Timeweb VPS`

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- Local Bot API: aiogram/telegram-bot-api:latest (–ø–æ—Ä—Ç—ã 8081, 8082)
- PostgreSQL: postgres:16-alpine (—Å—Ö–µ–º—ã: shared, mpcabinet)
- Bot: custom Python 3.11 + ffmpeg

---

### –í–µ—Ä—Å–∏—è 0.3.2 ‚Äî 20.01.2026

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- [x] –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ URLs —Å TTL 1 —á–∞—Å
- [x] –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å 10-30 —Å–µ–∫ –¥–æ 1-2 —Å–µ–∫
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (—Ç–æ–≤–∞—Ä—ã –±–µ–∑ –≤–∏–¥–µ–æ)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –î–æ–±–∞–≤–ª–µ–Ω `services/video_cache.py` (91 —Å—Ç—Ä–æ–∫–∞)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `WBParser` –∏ `article.py`
- 6 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤ `tests/test_video_cache.py`

**Commit:** `ff6d831 - –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ URLs`

---

### –í–µ—Ä—Å–∏—è 0.3.1 ‚Äî 19.01.2026

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- [x] –û–±–Ω–æ–≤–ª—ë–Ω —Ñ–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞
- [x] –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: `‚úÖ–¢–æ–≤–∞—Ä: {nm_id} ‚Äî –Ω–∞–π–¥–µ–Ω!`
- [x] –£–±—Ä–∞–Ω emoji üì¶

**Commit:** `9386479 - –û–±–Ω–æ–≤–ª—ë–Ω —Ñ–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞`

---

### –í–µ—Ä—Å–∏—è 0.3.0 ‚Äî 19.01.2026

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- [x] –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–∏—Å–∫–∞ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [x] –§–æ–Ω–æ–≤—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ `asyncio.create_task()`
- [x] Callback-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
- [x] –°—Ç–∞—Ç—É—Å—ã: "üé• –í–∏–¥–µ–æ: ‚è≥ –∏—â–µ–º 0%" ‚Üí "10%" ‚Üí "–µ—Å—Ç—å ‚úÖ"
- [x] –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞ 2-6 —Å–µ–∫)

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- `progress_callback` –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ `WBParser._check_video()`
- –î–µ–±–∞—É–Ω—Å–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–∫–∞–∂–¥—ã–µ 10% –∏–ª–∏ 2+ —Å–µ–∫)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞

**Commit:** `59acdec - –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–∏—Å–∫–∞ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏`

---

### –í–µ—Ä—Å–∏—è 0.2.x ‚Äî HLS –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**0.2.7:**
- [x] –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞ (skip_video, skip_photos)
- [x] –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å 40 —Å–µ–∫ –¥–æ 6 —Å–µ–∫

**0.2.6:**
- [x] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ basket (–≤—Å–µ 100 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
- [x] –£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å 2-4 —Å–µ–∫ –¥–æ 1-2 —Å–µ–∫

**0.2.2:**
- [x] –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞–º–∏
- [x] `@log_execution_time()`, `@log_function_call()`

**0.2.0:**
- [x] HLS ‚Üí MP4 –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ ffmpeg
- [x] –î–æ–±–∞–≤–ª–µ–Ω `services/hls_converter.py`
- [x] 13 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è HLS –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞

---

### –í–µ—Ä—Å–∏—è 0.1.x ‚Äî –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**0.1.9:**
- [x] –ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ WB CDN
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ (MP4)
- [x] Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—ã–±–æ—Ä–∞ –º–µ–¥–∏–∞
- [x] Middleware –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

---

## –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏

### –í —Ä–∞–±–æ—Ç–µ: –í–µ—Ä—Å–∏—è 0.5.0 ‚Äî –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–¶–µ–ª—å:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã –¥–ª—è –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è.

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–æ–±—ã—Ç–∏–π
- –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram-–∫–∞–Ω–∞–ª –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –¥–∞–π–¥–∂–µ—Å—Ç –≤ 00:00 –ú–°–ö —Å –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- Graceful degradation: –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- TDD –ø–æ–¥—Ö–æ–¥: –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏

---

#### –§–∞–∑–∞ 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î (asyncpg)

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ requirements.txt (asyncpg, apscheduler, pytz)
- [ ] –°–æ–∑–¥–∞—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é `postgres/init/02-analytics.sql`:
  - –¢–∞–±–ª–∏—Ü–∞ `shared.users` (telegram_id, username, first_name, last_name, first_seen, last_seen)
  - –¢–∞–±–ª–∏—Ü–∞ `shared.analytics_events` (id, telegram_id FK, event_type, event_data JSONB, created_at)
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `db/__init__.py`
- [ ] –°–æ–∑–¥–∞—Ç—å `db/connection.py` ‚Äî –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π asyncpg
  - `get_pool()` ‚Äî singleton –ø—É–ª–∞
  - `close_pool()` ‚Äî graceful shutdown
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î:**
```sql
-- shared.users
CREATE TABLE shared.users (
    telegram_id BIGINT PRIMARY KEY,
    username VARCHAR(255),
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    first_seen TIMESTAMP DEFAULT NOW(),
    last_seen TIMESTAMP DEFAULT NOW()
);

-- shared.analytics_events
CREATE TABLE shared.analytics_events (
    id SERIAL PRIMARY KEY,
    telegram_id BIGINT REFERENCES shared.users(telegram_id) ON DELETE CASCADE,
    event_type VARCHAR(50) NOT NULL,  -- 'user_start', 'article_request', 'photo_sent', 'video_sent', 'error'
    event_data JSONB,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_events_created_at ON shared.analytics_events(created_at);
CREATE INDEX idx_events_type ON shared.analytics_events(event_type);
CREATE INDEX idx_events_telegram_id ON shared.analytics_events(telegram_id);
```

---

#### –§–∞–∑–∞ 2: –°–ª–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å `services/analytics.py`:
  - –ö–ª–∞—Å—Å `AnalyticsService` —Å –º–µ—Ç–æ–¥–∞–º–∏:
    - `track_user_start(user_id, username, first_name, last_name)` ‚Üí bool (–Ω–æ–≤—ã–π –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π)
    - `track_article_request(user_id, nm_id)`
    - `track_photos_sent(user_id, nm_id, count)`
    - `track_video_sent(user_id, nm_id)`
    - `track_error(user_id, error_type, error_message)`
    - `get_daily_stats(date)` ‚Üí —Å–ª–æ–≤–∞—Ä—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
  - Graceful degradation: –µ—Å–ª–∏ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –ª–æ–≥–∏—Ä—É–µ–º warning, –Ω–µ –ø–∞–¥–∞–µ–º
- [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã `tests/test_analytics.py`:
  - –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ (mock asyncpg)
  - –¢–µ—Å—Ç graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–µ –ë–î
  - –¢–µ—Å—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ vs –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

#### –§–∞–∑–∞ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ó–∞–¥–∞—á–∏:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `config/settings.py`:
  - `ANALYTICS_CHANNEL_ID: Optional[int] = -1003238492068`
  - `ENABLE_ANALYTICS: bool = True` (–¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤ dev)
- [ ] –°–æ–∑–¥–∞—Ç—å `services/notifications.py`:
  - `send_new_user_notification(bot, user_id, username, first_name)`
  - `send_daily_digest(bot, stats_dict)`
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram-—Ñ–æ—Ä–º–∞—Ç

---

#### –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ handlers

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: Callback Pattern**

–î–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–¥–∏–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Callback Pattern** (–í–∞—Ä–∏–∞–Ω—Ç 5):
- MediaDownloader –ø–æ–ª—É—á–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–ª–ª–±–µ–∫–∏ `on_success`, `on_photos_success`, `on_video_success`
- –ö–æ–ª–ª–±–µ–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –º–µ–¥–∏–∞
- Return type –º–µ—Ç–æ–¥–æ–≤ –ù–ï –º–µ–Ω—è–µ—Ç—Å—è (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
- MediaDownloader –ù–ï –∑–Ω–∞–µ—Ç –ø—Ä–æ –∞–Ω–∞–ª–∏—Ç–∏–∫—É (Separation of Concerns)
- Graceful degradation: –æ—à–∏–±–∫–∞ –≤ –∫–æ–ª–ª–±–µ–∫–µ –Ω–µ —Ä–æ–Ω—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (MediaDownloader —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω)
- ‚úÖ –¢—Ä–µ–∫–∏–Ω–≥ —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å (–ª—é–±–∞—è –ª–æ–≥–∏–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–ª–ª–±–µ–∫–∏)

**–ó–∞–¥–∞—á–∏:**
- [x] –û–±–Ω–æ–≤–∏—Ç—å `bot/handlers/start.py`:
  - –ü–æ—Å–ª–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –≤—ã–∑–≤–∞—Ç—å `analytics.track_user_start()`
  - –ï—Å–ª–∏ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª
- [x] –û–±–Ω–æ–≤–∏—Ç—å `bot/handlers/article.py`:
  - –ü–æ—Å–ª–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∞—Ä—Ç–∏–∫—É–ª–∞ ‚Üí `analytics.track_article_request()`
  - –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö ‚Üí `analytics.track_error()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å callbacks –≤ `services/media_downloader.py`:
  - `send_photos(..., on_success: Optional[Callable[[int], Awaitable[None]]] = None)`
  - `send_video(..., on_success: Optional[Callable[[], Awaitable[None]]] = None)`
  - `send_both(..., on_photos_success=..., on_video_success=...)`
  - –í—ã–∑–æ–≤ –∫–æ–ª–ª–±–µ–∫–æ–≤ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
  - Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ –∫–æ–ª–ª–±–µ–∫–µ
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `tests/test_media_downloader.py`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–ª–ª–±–µ–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∫–æ–ª–ª–±–µ–∫ –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ –∫–æ–ª–ª–±–µ–∫–µ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è send_both: —Ñ–æ—Ç–æ OK + –≤–∏–¥–µ–æ FAIL ‚Üí —Ç–æ–ª—å–∫–æ on_photos_success
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `bot/handlers/callbacks.py`:
  - –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª—è–º–±–¥—ã —Å `analytics.track_photos_sent(user_id, nm_id, count)`
  - –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª—è–º–±–¥—ã —Å `analytics.track_video_sent(user_id, nm_id)`
  - –î–ª—è send_both: 2 –∫–æ–ª–ª–±–µ–∫–∞ (—Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Ä–∞–∑–¥–µ–ª—å–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã `tests/test_callbacks_handler.py`:
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ù–ï –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

---

#### –§–∞–∑–∞ 5: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–∞–π–¥–∂–µ—Å—Ç–∞ (APScheduler)

**–ó–∞–¥–∞—á–∏:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `main.py`:
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É–ª–∞ –ë–î –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
  - –°–æ–∑–¥–∞–Ω–∏–µ `APScheduler` —Å timezone='Europe/Moscow'
  - –ó–∞–¥–∞—á–∞ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–π–¥–∂–µ—Å—Ç–∞
  - Graceful shutdown –ø—É–ª–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- [ ] –°–æ–∑–¥–∞—Ç—å `services/digest.py`:
  - `generate_daily_digest(date)` ‚Üí —Ç–µ–∫—Å—Ç –¥–∞–π–¥–∂–µ—Å—Ç–∞
  - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ `shared.analytics_events`
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–§–æ—Ä–º–∞—Ç –¥–∞–π–¥–∂–µ—Å—Ç–∞:**
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ 22.01.2026

üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
‚Ä¢ –ù–æ–≤—ã—Ö: 5
‚Ä¢ –í—Å–µ–≥–æ: 23
‚Ä¢ –í–µ—Ä–Ω—É–ª–∏—Å—å: 8 (–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ /start)

üì¶ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
‚Ä¢ –ó–∞–ø—Ä–æ—Å–æ–≤ –∞—Ä—Ç–∏–∫—É–ª–æ–≤: 42
‚Ä¢ –§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 156 (38 —Ç–æ–≤–∞—Ä–æ–≤)
‚Ä¢ –í–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 15

‚ö†Ô∏è –û—à–∏–±–∫–∏:
‚Ä¢ –í—Å–µ–≥–æ: 2
‚Ä¢ –¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω: 1
‚Ä¢ –û—à–∏–±–∫–∞ WB API: 1
```

---

#### –§–∞–∑–∞ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ: `pytest tests/ -v` ‚Üí 100% pass
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏: `pytest --cov=services --cov=db`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env.example` —Å –ø—Ä–∏–º–µ—Ä–æ–º ANALYTICS_CHANNEL_ID
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `docker-compose.yml`: –¥–æ–±–∞–≤–∏—Ç—å volume –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
- [ ] –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ VPS:
  - –ó–∞–≥—Ä—É–∑–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  - –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é: `docker exec postgres psql -U ... -f /init/02-analytics.sql`
  - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –±–æ—Ç–∞
  - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ VPS:
  - –ó–∞–ø—É—Å—Ç–∏—Ç—å /start ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª–µ
  - –ü–æ–¥–æ–∂–¥–∞—Ç—å 00:00 –ú–°–ö ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–π–¥–∂–µ—Å—Ç

---

#### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- ‚úÖ –ë–î —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –î–∞–π–¥–∂–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ 00:00 –ú–°–ö
- ‚úÖ Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ë–î
- ‚úÖ –ë–æ—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω –Ω–∞ VPS

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:**
- –ö–æ–º–∞–Ω–¥–∞ `/stats` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—Ä—É—á–Ω—É—é
- –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ CSV

---

### –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤–µ—Ä—Å–∏–∏ 0.4.0

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- [x] –û–±–Ω–æ–≤–∏—Ç—å `README.md` (–≤–µ—Ä—Å–∏—è, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –¥–µ–ø–ª–æ–π)
- [x] –°–æ–∑–¥–∞—Ç—å `docs/VDS.md` (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `docs/PLAN.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- [x] –û–±–Ω–æ–≤–∏—Ç—å `VERSION` —Ñ–∞–π–ª
- [ ] –°–æ–∑–¥–∞—Ç—å git tag `v0.4.0`
- [ ] –°–¥–µ–ª–∞—Ç—å —Ä–µ–ª–∏–∑ –Ω–∞ GitHub

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ –Ω–∞ VPS (74.8s ‚Üí 3-5s)
- [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `download_hls_fast()` –≤–º–µ—Å—Ç–æ `convert_hls_to_mp4()`

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ 0.5.0:**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç –Ω–∞ VPS —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–∞–π–ª–æ–≤ > 50 MB —á–µ—Ä–µ–∑ Local API
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–±—ç–∫–∞–ø—ã PostgreSQL

---

## –ò–¥–µ–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π

### 0.4.x ‚Äî –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π**

- [ ] –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π –∫–µ—à (Redis/SQLite) –≤–º–µ—Å—Ç–æ in-memory
- [ ] Metrics –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus)
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π BATCH_SIZE –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç latency
- [ ] –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω—ã–π pre-fetch –≤–∏–¥–µ–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –¢–µ–∫—É—â–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å.

---

### 0.5.x ‚Äî –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∏–∑–∫–∏–π**

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ (—Å–ø–∏—Å–æ–∫ –∞—Ä—Ç–∏–∫—É–ª–æ–≤)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞ –≤ –∞—Ä—Ö–∏–≤ (ZIP)
- [ ] –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞ (–Ω–µ —Ç–æ–ª—å–∫–æ –∞—Ä—Ç–∏–∫—É–ª—É)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –¢—Ä–µ–±—É—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

### –ö—Ä–∏—Ç–∏—á–Ω—ã–π

- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞

### –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–π

- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `wb_parser.py` (542 —Å—Ç—Ä–æ–∫–∏) ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤
- [ ] –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ warnings –≤ —Ç–µ—Å—Ç–∞—Ö (3554 deprecation warnings –æ—Ç asyncio)
- [ ] –î–æ–±–∞–≤–∏—Ç—å type hints –¥–ª—è –≤—Å–µ—Ö callback —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –≤ —Ñ–æ—Ä–º–∞—Ç–µ Sphinx

---

## –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–¥

- **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥:** ~1750 —Å—Ç—Ä–æ–∫
- **–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥:** ~1750 —Å—Ç—Ä–æ–∫
- **–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:** 82%
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 91
- **Python —Ñ–∞–π–ª–æ–≤:** 31

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –û–ø–µ—Ä–∞—Ü–∏—è | 0.1.x | 0.2.7 | 0.3.0 | 0.3.2 |
|----------|-------|-------|-------|-------|
| –ü–æ–∫–∞–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ | ~40 —Å–µ–∫ | ~6 —Å–µ–∫ | ~2-6 —Å–µ–∫ | ~2-6 —Å–µ–∫ |
| –ü–æ–∏—Å–∫ basket | 2-4 —Å–µ–∫ | 1-2 —Å–µ–∫ | 1-2 —Å–µ–∫ | ~0 —Å–µ–∫ (–∫–µ—à) |
| –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ (–ø–µ—Ä–≤—ã–π) | 10-30 —Å–µ–∫ | 10-30 —Å–µ–∫ | 10-30 —Å–µ–∫ (—Ñ–æ–Ω) | 5-30 —Å–µ–∫ (—Ñ–æ–Ω) |
| –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ (–ø–æ–≤—Ç–æ—Ä) | 10-30 —Å–µ–∫ | 10-30 —Å–µ–∫ | 10-30 —Å–µ–∫ (—Ñ–æ–Ω) | 1-2 —Å–µ–∫ (–∫–µ—à) |

---

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### Telegram Bot API

- –í–∏–¥–µ–æ –±–æ–ª—å—à–µ 20 MB –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ URL (–ª–∏–º–∏—Ç Telegram)
- sendMediaGroup –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 2-10 —Ñ–∞–π–ª–æ–≤

### Wildberries API

- Basket –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–±–æ—Ä–æ–º (–Ω–µ—Ç —Ñ–æ—Ä–º—É–ª—ã)
- Rate limit –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–µ—Ä–∂–∫–∏ 0.01-0.2 —Å–µ–∫)
- –í–∏–¥–µ–æ –≤ HLS —Ñ–æ—Ä–º–∞—Ç–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ffmpeg –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è HLS –≤–∏–¥–µ–æ
- Python 3.10+ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)

---

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–∞ (–¥–ª—è minor/major –≤–µ—Ä—Å–∏–π)

1. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - [ ] `README.md` ‚Äî –≤–µ—Ä—Å–∏—è, changelog, –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
   - [ ] `CONTEXT.md` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - [ ] `docs/PLAN.md` ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å, –∏—Å—Ç–æ—Ä–∏—è
   - [ ] `VERSION` —Ñ–∞–π–ª ‚Äî –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ:**
   - [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç: `pytest tests/ -v`
   - [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –Ω–µ —É–ø–∞–ª–æ: `pytest --cov=. --cov-report=term-missing`
   - [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

3. **–°–æ–∑–¥–∞—Ç—å git tag:**
   ```bash
   git tag -a v0.3.2 -m "–í–µ—Ä—Å–∏—è 0.3.2: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ URLs"
   git push origin v0.3.2
   ```

4. **–°–æ–∑–¥–∞—Ç—å GitHub —Ä–µ–ª–∏–∑:**
   - –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ `docs/PLAN.md`
   - –°—Å—ã–ª–∫–∞ –Ω–∞ pull request (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –û—Ç–º–µ—Ç–∏—Ç—å breaking changes (–¥–ª—è major)

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WB API:** [docs/wb-api/README.md](wb-api/README.md)
- **–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** [docs/wb-api/PROMPTS.md](wb-api/PROMPTS.md)
- **–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** [CLAUDE.md](../CLAUDE.md)
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [CONTEXT.md](../CONTEXT.md)
- **README:** [README.md](../README.md)

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub Issues:** –î–ª—è –±–∞–≥–æ–≤ –∏ feature requests
- **Telegram —Å–æ–æ–±—â–µ—Å—Ç–≤–æ:** https://t.me/+R0Px1RRDjnQwZjQy (MPCabinet —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 22.01.2026 14:30
**–ê–≤—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** Claude Sonnet 4.5
